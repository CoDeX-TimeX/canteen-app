<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Menu Uploader</title>
</head>

<body>
    <h1>Menu Migration Tool</h1>
    <p>Click the button below to upload your menu.js items to Firebase.</p>
    <button onclick="uploadMenu()" style="padding:20px; font-size:20px; cursor:pointer;">üöÄ Upload to Cloud</button>
    <div id="status" style="margin-top:20px; font-family:monospace;"></div>

    <script src="menu.js"></script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, doc, setDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDGNfaSsDoVEn9e_EEA36J7FbtDG9Zpcww",
            authDomain: "gwalia-canteen-db.firebaseapp.com",
            projectId: "gwalia-canteen-db",
            storageBucket: "gwalia-canteen-db.firebasestorage.app",
            messagingSenderId: "609249581676",
            appId: "1:609249581676:web:9495fd520ba2681ac4d649"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.uploadMenu = async function () {
            const statusDiv = document.getElementById('status');
            statusDiv.innerHTML = "Starting upload...<br>";

            if (typeof menuItems === 'undefined') {
                statusDiv.innerHTML += "‚ùå Error: Could not find 'menuItems'. Make sure menu.js is in the same folder.<br>";
                return;
            }

            let count = 0;
            for (const item of menuItems) {
                try {
                    // We use setDoc with the ID string so it matches your current IDs (e.g., "1", "55")
                    // We also add 'isAvailable: true' so you can toggle it later
                    await setDoc(doc(db, "menu_items", String(item.id)), {
                        id: item.id,
                        name: item.name,
                        price: item.price,
                        category: item.category,
                        image: item.image,
                        isAvailable: true
                    });

                    statusDiv.innerHTML += `‚úÖ Uploaded: ${item.name}<br>`;
                    count++;
                } catch (e) {
                    statusDiv.innerHTML += `‚ùå Failed: ${item.name} (${e.message})<br>`;
                }
            }

            statusDiv.innerHTML += `<br>üéâ DONE! Uploaded ${count} items.`;
        }
    </script>
</body>

</html>